{"version":3,"sources":["webpack:///./gridSizerTemplate.hbs","webpack:///./apiService.js","webpack:///./index.js","webpack:///./cardTemplate.hbs"],"names":["Handlebars","module","exports","template","container","depth0","helpers","partials","data","apiService","proxy","baseUrl","key","query","page","per_page","last_page","get","url","this","fetch","then","response","json","console","log","hits","catch","error","form","document","querySelector","gallery","getPath","masonryInstance","Masonry","columnWidth","percentPosition","stagger","visibleStyle","transform","opacity","hiddenStyle","defaults","styling","icons","delay","infScroll","InfiniteScroll","responseType","path","history","outlayer","loadOnScroll","pnotifyMessage","e","success","text","on","throttle","images","JSON","parse","length","options","proxyEl","createElement","classList","add","textContent","appendChild","lastPage","markup","map","image","cardTemplate","join","innerHTML","items","querySelectorAll","appendItems","imagesLoaded","layout","appended","addElementsInDOM","addEventListener","event","target","nodeName","basicLightbox","dataset","lg","alt","show","value","preventDefault","li","gridSizerTemplate","append","loadNextPage","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call"],"mappings":"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","file":"main.ead6e5c0bbf8d78fe3c3.js","sourcesContent":["var Handlebars = require(\"../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<li class=\\\"grid-sizer\\\"></li>\";\n},\"useData\":true});","const apiService = {\n    proxy: 'https://cors-anywhere.herokuapp.com/',\n    baseUrl: 'https://pixabay.com/api/',\n    key: '17512246-8cb81e257606609dfb7634e3b',\n    query: '',\n    page: 1,\n    per_page: 12,\n    last_page: false,\n    get() {\n        const url = `${this.baseUrl}?key=${this.key}&q=${this.query}&page=${this.page}&per_page=${this.per_page}`;\n\n        return fetch(url)\n            .then(response => response.json())\n            .then(data => {\n                console.log(data);\n                return data.hits;\n            })\n            .catch(error => console.error(error));\n    },\n};\n\nexport default apiService;","import './styles.css';\r\nimport apiService from './apiService';\r\nimport cardTemplate from './cardTemplate.hbs';\r\nimport gridSizerTemplate from './gridSizerTemplate.hbs';\r\nimport InfiniteScroll from 'infinite-scroll';\r\nimport '@pnotify/core/dist/PNotify.css';\r\nimport { defaults } from '@pnotify/core';\r\nimport { alert, notice, info, success, error } from '@pnotify/core';\r\nimport '@pnotify/core/dist/Material.css';\r\nimport 'material-design-icons/iconfont/material-icons.css';\r\nimport Masonry from 'masonry-layout';\r\nimport imagesLoaded from 'imagesloaded';\r\nimport { data } from 'infinite-scroll/js/core';\r\nimport throttle from 'lodash.throttle';\r\nimport * as basicLightbox from 'basiclightbox';\r\nimport 'basiclightbox/dist/basicLightbox.min.css';\r\n\r\nconst form = document.querySelector('#search-form');\r\nconst gallery = document.querySelector('.gallery');\r\nconst galleryWrap = document.querySelector('.gallery-wrap');\r\n\r\nfunction getPath() {\r\n    return `${apiService.proxy}${apiService.baseUrl}?key=${apiService.key}&q=${apiService.query}&page=${apiService.page}&per_page=${apiService.per_page}`;\r\n}\r\n\r\nconst masonryInstance = new Masonry(gallery, {\r\n    columnWidth: '.grid-sizer',\r\n    percentPosition: true,\r\n    stagger: 30,\r\n    visibleStyle: { transform: 'translateY(0)', opacity: 1 },\r\n    hiddenStyle: { transform: 'translateY(100px)', opacity: 0 },\r\n});\r\n\r\ndefaults.styling = 'material';\r\ndefaults.icons = 'material';\r\ndefaults.delay = 2000;\r\n\r\nconst infScroll = new InfiniteScroll(gallery, {\r\n    // options\r\n    responseType: 'text',\r\n    path() {\r\n        return getPath();\r\n    },\r\n    history: false,\r\n    outlayer: masonryInstance,\r\n    loadOnScroll: true,\r\n});\r\n\r\ninfScroll.on('load', throttle(getImages, 100));\r\n\r\nfunction getImages(response) {\r\n    const result = JSON.parse(response);\r\n    const images = result.hits;\r\n\r\n    console.log(images);\r\n\r\n    if (images.length === 0) {\r\n        lastPage();\r\n        return;\r\n    }\r\n\r\n    addElementsInDOM(images);\r\n\r\n    pnotifyMessage(1);\r\n\r\n    apiService.page += 1;\r\n}\r\n\r\nfunction addElementsInDOM(images) {\r\n    const markup = images.map(image => cardTemplate(image)).join('');\r\n\r\n    const proxyEl = document.createElement('div');\r\n    proxyEl.innerHTML = markup;\r\n\r\n    const items = proxyEl.querySelectorAll('.grid-item');\r\n\r\n    infScroll.appendItems(items);\r\n\r\n    const imagesLoadedInstance = imagesLoaded(gallery);\r\n\r\n    imagesLoadedInstance.on('progress', () => {\r\n        masonryInstance.layout();\r\n    });\r\n\r\n    masonryInstance.appended(items);\r\n}\r\n\r\nfunction lastPage() {\r\n    infScroll.options.loadOnScroll = false;\r\n    const proxyEl = document.createElement('p');\r\n    proxyEl.classList.add('infinite-scroll-last');\r\n    proxyEl.textContent = 'End of content. No more pages to load';\r\n    gallery.appendChild(proxyEl);\r\n    pnotifyMessage();\r\n}\r\n\r\nfunction pnotifyMessage(e) {\r\n    if (e === 1) {\r\n        const mySuccess =\r\n            apiService.page === 1 ?\r\n            success({\r\n                text: `Yor ${apiService.query} loaded Success!`,\r\n            }) :\r\n            success({\r\n                text: 'The Scrolling Success!',\r\n            });\r\n    } else {\r\n        success({\r\n            text: 'End of content. No more pages to load',\r\n        });\r\n    }\r\n}\r\n\r\ngallery.addEventListener('click', event => {\r\n    if (event.target.nodeName !== 'IMG') {\r\n        return;\r\n    }\r\n    const instance = basicLightbox.create(`\r\n    <div class=\"modal\">\r\n        <div class=\"modal-content\">\r\n            <img class=\"modal-img\" src=\"${event.target.dataset.lg}\" alt=\"${event.target.alt}\">\r\n        </div>\r\n    </div>\r\n`);\r\n\r\n    instance.show();\r\n    console.log(event.target.alt);\r\n});\r\n\r\nform.addEventListener('keydown', e => {\r\n    apiService.query = e.target.value;\r\n\r\n    if (e.key === 'Enter' && apiService.query !== '') {\r\n        event.preventDefault();\r\n\r\n        gallery.innerHTML = '';\r\n\r\n        infScroll.options.loadOnScroll = true;\r\n\r\n        apiService.page = 1;\r\n\r\n        const columnValue = [1, 2, 3];\r\n\r\n        const markup = columnValue.map(li => gridSizerTemplate(li)).join('');\r\n\r\n        const proxyEl = document.createElement('div');\r\n        proxyEl.innerHTML = markup;\r\n\r\n        const items = proxyEl.querySelectorAll('.grid-sizer');\r\n\r\n        console.log(items);\r\n\r\n        gallery.append(...items);\r\n\r\n        masonryInstance.appended(items);\r\n\r\n        infScroll.options.path = getPath;\r\n\r\n        infScroll.loadNextPage();\r\n\r\n        e.target.value = '';\r\n    }\r\n});","var Handlebars = require(\"../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li class=\\\"grid-item\\\">\\n    <div class=\\\"photo-card\\\">\\n  <img src=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"webformatURL\") || (depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"webformatURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":12},\"end\":{\"line\":3,\"column\":28}}}) : helper)))\n    + \"\\\" data-lg=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"largeImageURL\") || (depth0 != null ? lookupProperty(depth0,\"largeImageURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"largeImageURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":39},\"end\":{\"line\":3,\"column\":56}}}) : helper)))\n    + \"\\\" alt=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"tags\") || (depth0 != null ? lookupProperty(depth0,\"tags\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"tags\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":63},\"end\":{\"line\":3,\"column\":71}}}) : helper)))\n    + \"\\\" />\\n\\n  <div class=\\\"stats\\\">\\n    <p class=\\\"stats-item\\\">\\n      <i class=\\\"material-icons\\\">thumb_up</i>\\n      \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"likes\") || (depth0 != null ? lookupProperty(depth0,\"likes\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"likes\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":8,\"column\":6},\"end\":{\"line\":8,\"column\":15}}}) : helper)))\n    + \"\\n    </p>\\n    <p class=\\\"stats-item\\\">\\n      <i class=\\\"material-icons\\\">visibility</i>\\n      \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"views\") || (depth0 != null ? lookupProperty(depth0,\"views\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"views\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":12,\"column\":6},\"end\":{\"line\":12,\"column\":15}}}) : helper)))\n    + \"\\n    </p>\\n    <p class=\\\"stats-item\\\">\\n      <i class=\\\"material-icons\\\">comment</i>\\n      \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"comments\") || (depth0 != null ? lookupProperty(depth0,\"comments\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"comments\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":16,\"column\":6},\"end\":{\"line\":16,\"column\":18}}}) : helper)))\n    + \"\\n    </p>\\n    <p class=\\\"stats-item\\\">\\n      <i class=\\\"material-icons\\\">cloud_download</i>\\n      \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"downloads\") || (depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"downloads\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":20,\"column\":6},\"end\":{\"line\":20,\"column\":19}}}) : helper)))\n    + \"\\n    </p>\\n  </div>\\n</div>\\n</li>\\n\\n\";\n},\"useData\":true});"],"sourceRoot":""}